---
{"dg-publish":true,"permalink":"/自然变换/","tags":["范畴论"]}
---


> [!definition] 自然变换，或函子之间的态射{\cite[Def.2.2.5
> - {liwenweiav1}}]\label{def:natraltrans}
>   具有相同变性(variance)的函子 $F, G: \mathsf{C}^{\prime} \rightarrow \mathsf{C}$ 之间的**自然变换** $\theta$ 是一族态射
>
$$
\theta_{X} \in \operatorname{Hom}_{\mathsf{C}}(F X, G X), \quad X \in \operatorname{Ob}\left(\mathsf{C}^{\prime}\right),
$$
>   称为$\theta$在$X$处的分量(component){（[[MonomorphismWikiwandArticles\|MonomorphismWikiwandArticles]] def.1.4.1）}，使得下图对所有 $\mathsf{C}^{\prime}$ 中的态射 $f: X \rightarrow Y$ 交换，
>
>   ```tikz
>   \usepackage{amsmath}
>   \usepackage{tikz-cd}
>   \begin{document}
>   \begin{tikzcd}[sep=small]
>   FX && GX \\
>   \\
>   FY && GY
>   \arrow["{\theta_X}", from=1-1, to=1-3]
>   \arrow["Gf", from=1-3, to=3-3]
>   \arrow["Ff"', from=1-1, to=3-1]
>   \arrow["{\theta_Y}"', from=3-1, to=3-3]
>   \end{tikzcd}
>   \end{document}
>   ```
>
>
>   或等价地
>
$$
Gf \circ \theta_X = \theta_Y \circ Ff
$$
>
>   自然变换记作 $\theta: F \implies G$, 或图解为
>
>   ```tikz
>   \usepackage{amsmath}
>   \usepackage{tikz-cd}
>   \begin{document}
>   \begin{tikzcd}[sep=small]
>   {\mathsf{C}^\prime} &&& {\mathsf{C}}
>   \arrow[""{name=0, anchor=center, inner sep=0}, "F", color={rgb,255:red,214;green,92;blue,92}, curve={height=-24pt}, from=1-1, to=1-4]
>   \arrow[""{name=1, anchor=center, inner sep=0}, "G"', color={rgb,255:red,214;green,92;blue,214}, curve={height=24pt}, from=1-1, to=1-4]
>   \arrow["\theta", shorten <=6pt, shorten >=6pt, Rightarrow, from=0, to=1]
>   \end{tikzcd}
>   \end{document}
>   ```
>
>
>   上述条件称为自然性条件(natuality condition)。
>
>   如果任取$X\in \mathrm{Ob}(\mathsf{C}^\prime)$，都有$\theta_X:FX\rightarrow GX$是同构(可逆)，则称自然变换$\theta$是**自然同构**(isomorphism)或**自然等价**(equivalence)，称函子$F$和$G$是**自然等价**或者**自然同构**的，记作$G \simeq F$。

> [!note]
> - 自然变换是一系列两个函子的像之间的箭头。可以将$\theta$视为由$\mathsf{C}^\prime$中的对象$X$索引的一族态射，显然只有当$FX$和$GX$都在同一个范畴中才能定义他们之间的态射，四角和四边上的东西分别都是$\mathsf{C}$中的对象和态射。
>
>   自然变换保持了两个函子的作用、对称性或其他结构。
>
>   自然变换是一个正统的、标准的、系统的、直觉上自然的映射。
>
>   如果$\theta_X$这族态射中的每个一都是同构，那么称两个函子是自然同构的。注意区分两个函子之间的自然等价与两个范畴之间的等价。
>
>   看到自然变换$\theta:F\implies G$就插入对象$X$，称为$\theta_X:FX\rightarrow GX$
>
>   在函子范畴中，函子是对象，自然变换是函子之间的态射，因此有定义头中的称呼。
>
>   通常称分量$\theta_X$关于$X$自然，以表示$\theta$是自然变换。

> [!definition] 函子(范畴)的等价{\cite[Def.0.17
> - {heunen2019CategoriesQuantumTheory}}]
>   函子 $F: \mathsf{C}^{\prime} \rightarrow \mathsf{C}$ 称为**等价**(equivalence)如果它满足以下三个性质，
>
> - **满**(full)：对每个 $X, Y \in \operatorname{Ob}\left(\mathsf{C}^{\prime}\right)$，都有$F:\mathrm{Hom}(X,Y)\rightarrow \mathrm{Hom}(F(X),F(Y)), f\mapsto F(f)$是满射。即函子$F$关于态射是满射。
> - **忠实**(faithful)：对每个 $X, Y \in \operatorname{Ob}\left(\mathsf{C}^{\prime}\right)$，以及所有箭头对$f_1,f_2:X\rightarrow$，都有$Ff_1=Ff_2$蕴含$f_1=f_2$。即函子$F$关于态射的是单射。
> - **本质满射**(essentially surjective on objects)：对每个$A\in \operatorname{Ob}\left(\mathsf{C}\right)$ ，都存在$X\in \operatorname{Ob}\left(\mathsf{C}^{\prime}\right)$，使得$F(X)$与$A$同构。即在对象同构的意义下，函子$F$关于对象是满射。

> [!note]
> - 既可以说函子是等价，也可以说两个范畴{（[[riehl2017category\|riehl2017category]] Def.1.5.4）}是等价的。
>
>   群的线性表示的忠实性就是在函子忠实的意义下说的。

> [!example] 矩阵与线性空间之间的等价
> - 矩阵$\mathsf{Mat}$和有限维线性空间$\mathsf{FVect}$之间存在等价$F$，定义$F(n)=\mathbb{F}^{\mathrm{dim}(V)}$。给定基底以后，就可以将线性变换唯一地写成矩阵形式，反过来确定了矩阵就确定了线性变换，而有限维线性空间$V$都和$\mathbb{F}^{\mathrm{dim}(V)}$同构。

基于自然变换和自然等价，有范畴等价的另一个刻画。
> [!theorem] 用自然变换定义等价函子{},{} （[[heunen2019CategoriesQuantumTheory\|heunen2019CategoriesQuantumTheory]] Def.0.21）
> - 函子$F:\mathsf{C}\rightarrow \mathsf{D}$是等价当且仅当存在一个函子$G:\mathsf{D}\rightarrow \mathsf{C}$使得函子的自然等价成立$F\circ G\simeq \mathrm{id}_\mathsf{C}$ 以及$G\circ F\simeq \mathrm{id}_\mathsf{D}$，称$G$和$F$互为**伪逆**(pseudo)。

> [!proof]
> 

> [!note]
> - 为什么不需要定义关于对象的本质单射？忠实满函子蕴含了“本质单射”{（[[perrone2024StartingCategoryTheory\|perrone2024StartingCategoryTheory]] prop.1.5.7）}。只需要满、忠实和本质忠实就已经能够说明存在两个范畴之间存在等价，即存在一对自然变换$\alpha:F\circ G\implies \mathrm{id}_\mathsf{C}$和$\beta:G\circ F\implies \mathrm{id}_\mathsf{D}$。

> [!example] 线性空间上恒等函子与双重对偶函子之间的自然变换
> - 对偶函子\footnote{op写在前面还是写在后面应该是无关紧要的，重要的是态射被函子打到另一个范畴之后方向是相同还是相反，无论写前面还是后面都都表示这个函子是反变的。}$(\cdot)^*\equiv  \mathrm{Hom}_\mathsf{Vect}(\cdot,\mathbb{K}): \mathsf{Vect}^{\mathrm{op}}\rightarrow \mathsf{Vect}$，它将线性空间$V$打到$\mathrm{Hom}(V,\mathbb{K})$，即我们熟悉的对偶空间的定义$V^*=\{ \omega  \mid \omega :V\rightarrow \mathbb{K}\}$，对偶函子将线性映射$\phi:V\rightarrow W$打到“将$\phi$复合于前”，
>
$$
\mathrm{Hom}_\mathsf{Vect^{\mathrm{op}}}(W,\mathbb{K}) = \mathrm{Hom}_\mathsf{Vect}(\mathbb{K},W)=W^* \rightarrow \mathrm{Hom}_\mathsf{Vect^{\mathrm{op}}}(V,\mathbb{K})=\mathrm{Hom}_\mathsf{Vect}(\mathbb{K},V)=V^*
$$
>
$$
(\omega:W\rightarrow \mathbb{K}) \mapsto ( \phi^*(\omega)=\omega \circ \phi:V\rightarrow \mathbb{K})
$$
>   即对于任意的$\omega \in W^*$，定义$\phi^*(\omega)=\omega\circ \phi$，这类似于1-形式的拉回，参见式{eq:1fpullback}。由于$\phi:V\rightarrow W$和经过对偶函子作用后的$\phi^*:W^*\rightarrow V^*$两个箭头方向相反，对偶函子是反变函子，因此它和恒等函子$\mathsf{Vect}\rightarrow \mathsf{Vect}$之间不可能存在自然变换。即便推广自然性的定义，不要求打过去的是同一个范畴\footnote{实际上并不清楚$\mathsf{Vect}^{op}$和$\mathsf{Vect}$是否在某种意义下一样，即他们之间是否存在函子(范畴)等价}，任何在$V$与$V^*$建立的同构$d_V$都不可能使得下图交换，
>
>   ```tikz
>   \usepackage{amsmath}
>   \usepackage{tikz-cd}
>   \begin{document}
>   \begin{tikzcd}
>   V & {V^{*}} \\
>   V & {V^{*}}
>   \arrow["\phi"', from=1-1, to=2-1]
>   \arrow["{d_V}", from=1-1, to=1-2]
>   \arrow["{d_V}"', from=2-1, to=2-2]
>   \arrow["{\phi^{*}}", from=1-2, to=2-2]
>   \end{tikzcd}
>   \end{document}
>   ```
>
>
>   下面证明不存在性(如何证?)，仅仅提供一个看上去自然但实际上并不自然的同构$d:V\rightarrow V^*,d(e_i)=e^i$，其中$e^i(e_i)=\delta_{j}^i$，根据线性性$d(v^ie_i)=v^ie^i$，分别沿两条路径走
>
$$
d(\phi(v))(e_k)=v^i\phi_{ki}
$$
>
$$
\phi^*(d(v))(e_k)=v^i\phi_{ik}
$$
>   基变换的图是交换的当且仅当$\phi_{ik}=\phi_{ki}$，即$\phi$在$\{e_i\}$下的矩阵是对称的。
>
>   这里没有提供$\mathsf{Vect}^{\mathrm{op}}$中的态射是1-形式(线性变换？还是什么？)的证明，\myemph{如何证?}，$\mathsf{Vect}$中的态射$\phi:V\rightarrow W$在$\mathsf{Vect}^{\mathrm{op}}$中对应的箭头是什么样的？思考共轭转置和对偶映射之间的关系。为什么对偶函子用$\mathrm{Hom}_{\mathsf{Vect}}(\cdot,\mathbb{K})$来定义而不是用其他的除$\mathbb{K}$以外的线性空间？
>
>
>
>   通常称线性空间$V$及其两重对偶$V^{**}$自然同构，即对于任意的$V$，有$V\cong V^{**}$，这是存在从恒等自函子到双重对偶函子的自然变换(实际上是自然同构)~
$$
\mathrm{ev}:\mathrm{id}_{\mathsf{Vect}}\implies \mathrm{Hom}_{\mathsf{Vect}}(\mathrm{Hom}_{\mathsf{Vect}}(\cdot,\mathbb{K}),\mathbb{K})
$$
>   其分量为$\mathrm{ev}_V:V\rightarrow V^{**},~v\mapsto (\mathrm{ev}_V(v):V^*\rightarrow \mathbb{K} ,~\omega \mapsto \mathrm{ev}_V(v)(\omega)=\omega(v))$。下面验证自然性，即存在交换图
>
>   ```tikz
>   \usepackage{amsmath}
>   \usepackage{tikz-cd}
>   \begin{document}
>   \begin{tikzcd}
>   V & {V^{**}} \\
>   W & {W^{**}}
>   \arrow["\phi"', from=1-1, to=2-1]
>   \arrow["{\mathrm{ev}_V}", from=1-1, to=1-2]
>   \arrow["{\mathrm{ev}_W}"', from=2-1, to=2-2]
>   \arrow["{\phi^{**}}", from=1-2, to=2-2]
>   \end{tikzcd}
>   \end{document}
>   ```
>
>
>   只要证明$\phi^{**}\circ \mathrm{ev}_V =\mathrm{ev}_W\circ \phi$，设$x \in V$，根据对偶函子的定义，$\phi^{**}(\mathrm{ev}_V(x))=\mathrm{ev}_V(x)\circ \phi^*$，取$\omega\in W^*$，有$\phi^{**}(\mathrm{ev}_V(x))(\omega)=\mathrm{ev}_V(x)\circ \phi^*(\omega) =\mathrm{ev}_V(x)(\omega\circ \phi)=\omega\circ \phi(x)$。另一方面，$\mathrm{ev}_W(\phi(x)) = \omega\circ \phi(x)$。如果$V=W$，且$\phi$是线性同构，那么可以将$\phi$理解为基变换(基变换就是线性同构)，自然性体现在如果改变$V$中的基底，那么$V^{**}$的基底也会随之改变，在基变换前后映射 $\mathrm{ev}_V$相等。

> [!example] $G$-等变函数是自然等价
> - 参见定义\ref{def:gequiv}。
